var emailGuyForm={};!function(n){var i=!1,t={errors:{required:"Fields with '*' are required.",email:"Email must be valid.",server:"There was an error sending. Please try again.",csrf:"Token missing. Please try again."}},r="form#emailGuy",e=r+" .submit",a=e+" .loader",o=r+" .status";n.init=function(){n.getCSRF(),$(document).on("submit",r,function(e){e.preventDefault();var r=$(this),i=$(o),t=r.find(".required"),a=n.validateFields(t);a?i.html(a):n.sendEmail(r)}),$(document).on("click",e,function(e){e.preventDefault(),$(r).trigger("submit")}),$(document).on("focus","form#emailGuy input, form#emailGuy textarea",function(e){e.preventDefault(),$(o).html("")})},n.required=function(e,r){return e?"":r?t.errors.csrf:t.errors.required},n.validateEmail=function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)?"":t.errors.email},n.validateFields=function(e){var t="";return e.each(function(){var e=$(this),r=e.val(),i=!1;if(e.hasClass("csrf")&&(i=!0),!(t=n.required(r,i))&&e.hasClass("email")&&(t=n.validateEmail(r)),t)return!1}),t},n.sendEmail=function(e){i||(i=!0,$(a).show(),$.ajax({type:e.attr("method"),url:e.attr("action"),data:e.serialize()}).done(function(e){n.completeSendEmail(e)}).fail(function(){n.completeSendEmail(t.error.server)}))},n.completeSendEmail=function(e){var r=$(a);$(o).html(e),r.hide(),i=!1},n.getCSRF=function(){$.ajax({type:"GET",url:"../php/getCSRF.php"}).done(function(e){$("form#emailGuy .csrf").val(e)}).fail(function(e){console.log(t.errors.server)})}}(emailGuyForm),$(document).ready(function(){emailGuyForm.init()});
